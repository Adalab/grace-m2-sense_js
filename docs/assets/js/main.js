"use strict";const collapsibleTriggers=document.querySelectorAll(".js-collapsible-trigger");function updateCollapsible(e){const t=e.currentTarget.parentElement,l=t.classList.contains("js-collapsible-open");for(const e of collapsibleTriggers)e.parentElement.classList.remove("js-collapsible-open");!1===l&&t.classList.add("js-collapsible-open")}for(const e of collapsibleTriggers)e.addEventListener("click",updateCollapsible);const cardPage=document.querySelector(".card_content"),select1=document.querySelector(".js-select1"),select2=document.querySelector(".js-select2"),select3=document.querySelector(".js-select3"),changePalette=function(e){return function(){cardPage.classList.remove("palette1","palette2","palette3"),cardPage.classList.add(e)}};select1.addEventListener("click",changePalette("palette1")),select2.addEventListener("click",changePalette("palette2")),select3.addEventListener("click",changePalette("palette3"));const changeText=function(e){const t=e.target.classList[0],l=document.querySelector(".js-card ."+t);if(null===l)return;const n=l.dataset.prefix||"",o=e.target.value||"",r=o?n+o:"";"A"===l.tagName?l.href=""===r?l.dataset.placeholder||"":r:l.innerHTML=""===r?l.dataset.placeholder||"":r},container=document.querySelector(".fill-in_items");container.addEventListener("keyup",changeText);const fr=new FileReader,uploadBtn=document.querySelector(".js__profile-trigger"),fileField=document.querySelector(".js__profile-upload-btn"),profileImage=document.querySelector(".js__profile-image"),profilePreview=document.querySelector(".js__profile-preview");function getImage(e){var t=e.currentTarget.files[0];fr.addEventListener("load",writeImage),fr.readAsDataURL(t)}function writeImage(){profileImage.style.backgroundImage=`url(${fr.result})`,profilePreview.style.backgroundImage=`url(${fr.result})`,getUserData()}function fakeFileClick(){fileField.click()}uploadBtn.addEventListener("click",fakeFileClick),fileField.addEventListener("change",getImage);const buttonReset=document.querySelector(".js-reset"),fillInInputs=document.querySelectorAll(".fill-in_input"),cardIcons=document.querySelectorAll(".card_link"),cardName=document.querySelector(".card_name"),cardJob=document.querySelector(".card_job"),defaultInfo={palette:1,name:"nombre apellido",job:"Front-end developer",email:"",phone:"",linkedin:"",github:""},resetInfo=function(e){e.preventDefault();for(const e of fillInInputs)e.value="";for(const e of cardIcons)e.href="";profileImage.style.backgroundImage="",profilePreview.style.backgroundImage="",cardName.innerHTML=defaultInfo.name,cardJob.innerHTML=defaultInfo.job,select1.checked=!0,select2.checked=!1,select3.checked=!1,cardPage.classList.remove("palette1","palette2","palette3"),cardPage.classList.add("palette"+defaultInfo.palette),resetData()};buttonReset.addEventListener("click",resetInfo);const buttonShare=document.querySelector(".share_button_img"),responseURL=document.querySelector(".completed_content_url"),fullName=document.querySelector("#full_name"),jobTitle=document.querySelector("#job");let phone=document.querySelector("#phone"),email=document.querySelector("#email"),linkedin=document.querySelector("#linkedin"),github=document.querySelector("#github");const completedContainer=document.querySelector(".completed_content"),twitterUrl=document.querySelector(".completed_content_button_twitter"),tweet="https://twitter.com/intent/tweet?text=My awesome profile card: ";function writeURL(){const e={palette:document.querySelector(".form_item:checked").value,name:fullName.value,job:jobTitle.value,phone:phone.value,email:email.value,linkedin:linkedin.value,github:github.value,photo:fr.result};fetch("https://us-central1-awesome-cards-cf6f0.cloudfunctions.net/card/",{method:"POST",body:JSON.stringify(e),headers:{"content-type":"application/json"}}).then(e=>e.json()).then(e=>showURL(e)).catch(e=>console.log(e))}function showURL(e){e.success?(responseURL.innerHTML="<a href="+e.cardURL+' target="_blank" class="completed_content_url">'+e.cardURL+"</a>",twitterUrl.href=tweet+e.cardURL,completedContainer.classList.remove("hidden")):responseURL.innerHTML="ERROR:"+e.error}function buttonEnabledDisabled(){event.preventDefault(),buttonShare.classList.add("share_button_disabled"),buttonShare.setAttribute("disabled",!0),buttonShare.style.backgroundColor="#d5d5d5",writeURL()}buttonShare.addEventListener("click",writeURL),buttonShare.addEventListener("click",buttonEnabledDisabled);const dataForm=document.querySelector(".js-form"),getFullName=document.querySelector("#full_name"),getJob=document.querySelector("#job"),getPhone=document.querySelector("#phone"),getEmail=document.querySelector("#email"),getLinkedinUser=document.querySelector("#linkedin"),getGitHubUser=document.querySelector("#github"),getPhotoUrl=document.querySelector(".js__profile-image"),getPreview=document.querySelector(".js__profile-preview"),colorSelected=document.querySelector(".js-palettes");function getUserData(){const e={name:getFullName.value,job:getJob.value,email:getPhone.value,phone:getEmail.value,linkedin:getLinkedinUser.value,github:getGitHubUser.value,photoURL:getPhotoUrl.style.backgroundImage,paletteSelected:document.querySelector(".form_item:checked").value};localStorage.setItem("data",JSON.stringify(e))}const resetData=function(){localStorage.removeItem("data")},paintData=function(e){if(e){getFullName.value=e.name,getJob.value=e.job,getPhone.value=e.phone,getEmail.value=e.email,getLinkedinUser.value=e.linkedin,getGitHubUser.value=e.github,getPhotoUrl.style.backgroundImage=e.photoURL,getPreview.style.backgroundImage=e.photoURL;let t=parseInt(e.paletteSelected)+1;cardPage.classList.remove("palette1","palette2","palette3"),cardPage.classList.add("palette"+t),1===t?select1.checked=!0:2===t?select2.checked=!0:select3.checked=!0,""===e.name?cardName.innerHTML=defaultInfo.name:cardName.innerHTML=e.name,""===e.job?cardJob.innerHTML=defaultInfo.job:cardJob.innerHTML=e.job,""===e.phone?document.querySelector(".js-phone").href="":document.querySelector(".js-phone").href=e.phone,""===e.email?document.querySelector(".js-email").href="":document.querySelector(".js-email").href="mailto:"+e.email,""===e.linkedin?document.querySelector(".js-linkedin").href="":document.querySelector(".js-linkedin").href="https://www.linkedin.com/in/"+e.linkedin,""===e.github?document.querySelector(".js-github").href="":document.querySelector(".js-github").href="https://github.com/"+e.github}},keepData=function(){const e=JSON.parse(localStorage.getItem("data"));paintData(e)};keepData(),colorSelected.addEventListener("change",getUserData),dataForm.addEventListener("keyup",getUserData);